---
title: 性能测试知识
date: 2021-11-30 12:44:59
tags:
---
## 一、性能测试怎么做的，流程是什么？
  &nbsp;&nbsp;公司压测主要是针对登录接口、首页单元课时信息接口、资源库知识点试题接口
  1、确定压测目标：因为产品目前用户数较少，所以在并发上要求不高。
  2、编写性能测试脚本，调试通过
  3、并发数从30左右==>200左右，响应时间在几百ms

## 二、分析系统最大TPS
1、首先，比较成熟或者有些规模的公司，一般都有各种各样的业务监控系统，定期监控各业务模块的核心接口的调用量，平均耗时等等。一般是以分钟为级别进行监控。
这个时候，我们就可以看该系统过去一周，甚至一个月访问量调用量最大的那一天，然后去找到该天调用量最大的峰值，精确到分钟级别。
比如晚上八点10分调用量最大为12000次，那么我们就可以计算出最大TPS为12000除以60为200。

2、没有这样的监控系统，那么应该怎么做呢？
没监控系统，可以看下中间件的访问日志，比如nginx的access.log，日志中详细记录了每个http请求的，访问时间，url，响应时间和状态码。
有了这些数据就好办了，我们可以编写脚本，统计出接口在哪个时间段访问量最高，多长时间调用多少次，然后跟上面方法一样进行计算确定TPS。 ==>可以请运维大佬帮忙写脚本

3、新项目：生产上面没有数据，怎么确定TPS==>二八定律
   百分之八十的用户在一天中百分之二十的时间进行访问。系统性能如果能支撑百分之二十时间的并发，其它时间也能支持。接下来详细进行说说怎么评估计算呢？
比如一个系统上线了一个抽奖活动，想评估下多大TPS可以顶住峰值。网站注册用户一千万，日活用户100万。
那么我们就可以根据这一百万用户在一天时间的访问进行估算。首先要考虑的是这100万不会都来参加抽奖，但是我们要保证最大tps，所以可以取极端值，用100万进行计算。
其次晚上12点到凌晨6点一般访问量极低，所以可以去掉这六个小时，按照18个小时计算。
那么根据二八定律，百分之八十的用户在百分之二十的时间访问。用户量就是100万乘以百分之八十，为80万请求。
时间就是18小时乘以百分之二十乘以3600秒为12960秒，那么TPS=80万除以12960秒为60左右。
虽然这种方式并没有上面那种查看业务监控以及中间件日志来的准确，但是总比你面试拍脑袋瞎说好的多，这也是一种分析思路。

4、以上情况都没有：不管指标，直接压测，给出压测报告，由相关领导决定要达到多少TPS来保证生产业务并发量