---
title: 面试复习3
password: 1224
date: 2021-12-21 10:21:12
categories:
tags:
- 面试
---

###### 性能测试怎么确定指标，要压多少个线程？
•一般有需求文档，将里面的一些需求量化为性能指标值，也是我们的性能指标预期结果
•比如会提前确定并发量（即线程数）、预期TPS、 响应时间
•一般并发数会根据系统来确定，如果是新系统就会要求业务部门进行一个初步的估算，然后从基准测试开始，
便用阶梯加压的方式，测试支持的最大并发量，即达到某个并发量之后，TPS 不再上升出现拐点了，达到瓶颈，确定最大并发量
•如果是旧系统，会以最大在线用户的10% 来做并发量

###### Jmeter 参数化的方法有哪些？
•配置元件-用户自定义变量
•配置元件-CSV 文件配置元件，通过CSV文件写测试用例，然后读取后做参数化
•前置处理器-用户戶参数
•前置处理器-JDBC前置脚本，通过数据库读敗数据进行参数化
•函数-CSVRead,也是读取 csV 测试用例文件

###### 用户自定义变量和用户参数有什么区别？
•用户自定义变量是配置元件，全局只生效一次，即使变量值是随机数也只会取一次
•用户参数是前置处理器，每请求一次都会重新执行一次，即变量值是随机数的话每次都会取新的值

###### 怎么拿到CPU、内存、上下文切换次数
vmstat 主要用来分析系统的内存使用情况，也常用来分析 CPU 上下文切换和中断的次数。
cs（context switch）是每秒上下文切换的次数。
in（interrupt）则是每秒中断的次数。
pidstat查看每个进程的详细情况:
```
pidstat -w 5
```
cswch: 表示每秒自愿上下文切换（voluntary context switches）的次数
nvcswch: 表示每秒非自愿上下文切换（non voluntary context switches）的次数
所谓自愿上下文切换，是指进程无法获取所需资源，导致的上下文切换。比如说， I/O、内存等系统资源不足时，就会发生自愿上下文切换。
而非自愿上下文切换，则是指进程由于时间片已到等原因，被系统强制调度，进而发生的上下文切换。比如说，大量进程都在争抢 CPU 时，就容易发生非自愿上下文切换。
###### like，_匹配一个字符
select * from students
where username like "_"

